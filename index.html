<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimal-ui, viewport-fit=cover">
  <script src="https://aframe.io/releases/1.7.0/aframe.min.js"></script>
  <script src="./aframe-keyboard.min.js"></script>
  <script src="https://unpkg.com/aframe-text-geometry-component/dist/aframe-text-geometry-component.min.js"></script>
  <script src="https://rawgit.com/rdub80/aframe-gui/master/dist/aframe-gui.min.js"></script>
  <script src="https://unpkg.com/aframe-environment-component@1.5.x/dist/aframe-environment-component.min.js"></script>
  <script type="text/javascript">
    AFRAME.registerComponent('backgroundButt', {
      schema: {
        default: ''
      },
      init() {
        const environment = document.querySelector('[environment]');
        var b = false
        this.el.addEventListener('click', () => {
          if (b) {
            environment.setAttribute('environment', 'preset: egypt; lighting: point; lightPosition: 0 2.5 -0.5; ambientColor: #fff2cc; directionalColor: #ffffe0; lightIntensity: 1.5; shadow: true;');
          } else {
            environment.setAttribute('environment', 'preset: starry; lighting: point; lightPosition: 0 2.5 -0.5; ambientColor: #b9d5ff; directionalColor: #ffffff; lightIntensity: 1.5; shadow: true;');
          }
          b = !b;
          console.log('clicked');
        });
      }
    });
  </script>


  <title>VRdle</title>
  <style src="./style.css"></style>
  <script src="./words.js"></script>
  <script src="./displacment-offset-shader.js"></script>



</head>

<body>


  <a-scene id="scene" keyboard-controls="false" keyboard-shortcuts="enterVR: false" cursor="rayOrigin:mouse" keyboard>
    <a-assets>
      <model id="model" src="VRdle/logoc.gltf" />


      <img id="egy" src="./assets/images/egypt.jpeg">
      <img id="sky" src="./assets/images/sky.jpeg">
      <img id="rules" src="./assets/images/rule.png">
      <a-asset-item id="optimerBoldFont"
        src="https://rawgit.com/mrdoob/three.js/dev/examples/fonts/optimer_bold.typeface.json"></a-asset-item>

    </a-assets>
    <!-- environment -->
    <a-entity environment="preset: starry; playArea: 1.5; shadow: true; lighting: point; lightPosition: 0 2.5 -0.5; ambientColor: #b9d5ff; directionalColor: #ffffff; lightIntensity: 1.5;"></a-entity>

    <!-- Additional Lighting -->
    <a-entity id="ambient-light" light="type: ambient; color: #b9d5ff; intensity: 0.5"></a-entity>
    <a-entity id="main-directional-light" position="1 5 2" light="type: directional; color: #ffffff; intensity: 0.8; castShadow: true; shadowMapHeight: 1024; shadowMapWidth: 1024"></a-entity>
    <a-entity id="keyboard-spot" position="-0.3 2 0" light="type: spot; color: #ffffff; intensity: 0.6; angle: 45; penumbra: 0.8; decay: 1; distance: 5; castShadow: true;"></a-entity>
    <a-entity id="background-spot" position="3 2 0" light="type: spot; color: #ffe6cc; intensity: 0.4; angle: 60; penumbra: 0.5; decay: 1.5; distance: 10"></a-entity>

    <!-- wordle board -->
    <!-- Container for the game board to position everything together -->
    <a-entity id="game-container" position="0 1.55 -1.2" rotation="0 0 0">

      <a-entity id="logo" scale="3 3 3" position="4 3 0" rotation="0 -90 0"
        text-geometry="value:Poiesis; size:0.15; font: #optimerBoldFont;" >
        <a-entity id="logoline2" position="0 -.2 0" text-geometry="value:Education; size:0.15"
          material="color:orange; metalness: .4; roughness: 0.8;"></a-entity>
      </a-entity>

      <a-camera position="0.05 0 1.9" wasd-controls-enabled="false" far="20000" near="0.005"></a-camera>
      <a-entity id="ruleplane" geometry="primitive: plane; height: 1.8; width: 1.8" rotation="-90.00021045914971 0 0" position="0 -1.55 0"
        material="src:#rules"></a-entity>
      
      <!-- Wordle rows with optimized positions and increased letter size -->
      <a-entity id="word-grid" position="-0.4 0.3 0" scale="1.2 1.2 1.2">
        <a-entity id="row1" position="0 0.5 0" rotation="0 0 0">
          <a-entity class="charDisplay" position="0 0 0" text-geometry="value:; size:0.25"
            material="color:; metalness:0.9; emissive: #111;">
          </a-entity>
          <a-entity class="charDisplay" position="0.3 0 0" text-geometry="value:; size:0.25"
            material="color:; metalness:0.9; emissive: #111;">
          </a-entity>
          <a-entity class="charDisplay" position="0.6 0 0" text-geometry="value:; size:0.25"
            material="color:; metalness:0.9; emissive: #111;">
          </a-entity>
          <a-entity class="charDisplay" position="0.9 0 0" text-geometry="value:; size:0.25"
            material="color:; metalness:0.9; emissive: #111;">
          </a-entity>
          <a-entity class="charDisplay" position="1.2 0 0" text-geometry="value:; size:0.25"
            material="color:; metalness:0.9; emissive: #111;">
          </a-entity>
        </a-entity>
        <a-entity id="row2" position="0 0.25 0" rotation="0 0 0">
          <a-entity class="charDisplay" position="0 0 0" text-geometry="value:; size:0.25"
            material="color:blue; metalness:0.9; emissive: #111;">
          </a-entity>
          <a-entity class="charDisplay" position="0.3 0 0" text-geometry="value:; size:0.25"
            material="color:; metalness:0.9; emissive: #111;">
          </a-entity>
          <a-entity class="charDisplay" position="0.6 0 0" text-geometry="value:; size:0.25"
            material="color:; metalness:0.9; emissive: #111;">
          </a-entity>
          <a-entity class="charDisplay" position="0.9 0 0" text-geometry="value:; size:0.25"
            material="color:; metalness:0.9; emissive: #111;">
          </a-entity>
          <a-entity class="charDisplay" position="1.2 0 0" text-geometry="value:; size:0.25"
            material="color:; metalness:0.9; emissive: #111;">
          </a-entity>
        </a-entity>
        <a-entity id="row3" position="0 0 0" rotation="0 0 0">
          <a-entity class="charDisplay" position="0 0 0" text-geometry="value:; size:0.25"
            material="color:; metalness:0.9; emissive: #111;">
          </a-entity>
          <a-entity class="charDisplay" position="0.3 0 0" text-geometry="value:; size:0.25"
            material="color:; metalness:0.9; emissive: #111;">
          </a-entity>
          <a-entity class="charDisplay" position="0.6 0 0" text-geometry="value:; size:0.25"
            material="color:; metalness:0.9; emissive: #111;">
          </a-entity>
          <a-entity class="charDisplay" position="0.9 0 0" text-geometry="value:; size:0.25"
            material="color:; metalness:0.9; emissive: #111;">
          </a-entity>
          <a-entity class="charDisplay" position="1.2 0 0" text-geometry="value:; size:0.25"
            material="color:; metalness:0.9; emissive: #111;">
          </a-entity>
        </a-entity>
        <a-entity id="row4" position="0 -0.25 0" rotation="0 0 0">
          <a-entity class="charDisplay" position="0 0 0" text-geometry="value:; size:0.25"
            material="color:; metalness:0.9; emissive: #111;">
          </a-entity>
          <a-entity class="charDisplay" position="0.3 0 0" text-geometry="value:; size:0.25"
            material="color:; metalness:0.9; emissive: #111;">
          </a-entity>
          <a-entity class="charDisplay" position="0.6 0 0" text-geometry="value:; size:0.25"
            material="color:; metalness:0.9; emissive: #111;">
          </a-entity>
          <a-entity class="charDisplay" position="0.9 0 0" text-geometry="value:; size:0.25"
            material="color:; metalness:0.9; emissive: #111;">
          </a-entity>
          <a-entity class="charDisplay" position="1.2 0 0" text-geometry="value:; size:0.25"
            material="color:; metalness:0.9; emissive: #111;">
          </a-entity>
        </a-entity>
        <a-entity id="row5" position="0 -0.5 0" rotation="0 0 0">
          <a-entity class="charDisplay" position="0 0 0" text-geometry="value:; size:0.25"
            material="color:; metalness:0.9; emissive: #111;">
          </a-entity>
          <a-entity class="charDisplay" position="0.3 0 0" text-geometry="value:; size:0.25"
            material="color:; metalness:0.9; emissive: #111;">
          </a-entity>
          <a-entity class="charDisplay" position="0.6 0 0" text-geometry="value:; size:0.25"
            material="color:; metalness:0.9; emissive: #111;">
          </a-entity>
          <a-entity class="charDisplay" position="0.9 0 0" text-geometry="value:; size:0.25"
            material="color:; metalness:0.9; emissive: #111;">
          </a-entity>
          <a-entity class="charDisplay" position="1.2 0 0" text-geometry="value:; size:0.25"
            material="color:; metalness:0.9; emissive: #111;">
          </a-entity>
        </a-entity>
        <a-entity id="row6" position="0 -0.75 0" rotation="0 0 0">
          <a-entity class="charDisplay" position="0 0 0" text-geometry="value:; size:0.25"
            material="color:; metalness:0.9; emissive: #111;">
          </a-entity>
          <a-entity class="charDisplay" position="0.3 0 0" text-geometry="value:; size:0.25"
            material="color:; metalness:0.9; emissive: #111;">
          </a-entity>
          <a-entity class="charDisplay" position="0.6 0 0" text-geometry="value:; size:0.25"
            material="color:; metalness:0.9; emissive: #111;">
          </a-entity>
          <a-entity class="charDisplay" position="0.9 0 0" text-geometry="value:; size:0.25"
            material="color:; metalness:0.9; emissive: #111;">
          </a-entity>
          <a-entity class="charDisplay" position="1.2 0 0" text-geometry="value:; size:0.25"
            material="color:; metalness:0.9; emissive: #111;">
          </a-entity>
        </a-entity>
      </a-entity>
      
      <!-- Text displays -->
      <a-text id="victory" font="dejavu" color="#00d600" value="" scale="0.6 0.6 0.6" position="0.2 0.7 0.2"></a-text>
      <a-entity id="input" position="0.2 0.65 0.1" text-geometry="value:; size:0.2"
        material="color:gold; metalness:0.9; emissive: #222;">
      </a-entity>
    </a-entity>
    
    <!-- VR -->
    <a-entity laser-controls="hand: right" raycaster="far: 100; lineColor: white;"></a-entity>
    
    <!-- keyboard with improved position -->
    <a-entity id="keyboard" rotation="-30 0 0" scale="1.8 1.8 1.8" position="0 0.95 -0.9" a-keyboard>
    </a-entity>

    <a-sphere material="shader:displacement-offset; color: #00d600; metalness: 0.9; roughness: 0.9;"" 
                myoffset-updater
                scale="1 1 1"
                radius="0.2"
                position="2.5 1.5 -2"
                segments-height="128"
                segments-width="128">
        <a-animation attribute="scale" direction="alternate-reverse" dur="5000" from="1 1 1" to="4 4 4" repeat="indefinite"></a-animation>
      </a-sphere>
      
    <a-entity id="rules" position="-0.5 1.2 -0.7" primitive="plane" material="src:#rules">

      <!-- Mouse input -->
  </a-scene>
  <noscript>Please turn on Javascript to view this website.</noscript>

</body>

</html>